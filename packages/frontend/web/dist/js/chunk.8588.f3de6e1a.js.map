{"version":3,"file":"js/chunk.8588.f3de6e1a.js","mappings":"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","sources":["webpack://@affine/web/../core/src/pages/workspace/all-page/all-page-filter.tsx","webpack://@affine/web/../core/src/components/filter-container.css.ts","webpack://@affine/web/../core/src/pages/workspace/all-page/all-page-header.tsx","webpack://@affine/web/../core/src/pages/workspace/all-page/all-page.css.ts","webpack://@affine/web/../core/src/pages/workspace/all-page/all-page.tsx"],"sourcesContent":["import { CollectionService } from '@affine/core/modules/collection';\nimport type { Collection, Filter } from '@affine/env/filter';\nimport { useService, WorkspaceService } from '@toeverything/infra';\nimport { useCallback } from 'react';\n\nimport { filterContainerStyle } from '../../../components/filter-container.css';\nimport {\n  FilterList,\n  SaveAsCollectionButton,\n} from '../../../components/page-list';\nimport { useNavigateHelper } from '../../../hooks/use-navigate-helper';\n\nexport const FilterContainer = ({\n  filters,\n  onChangeFilters,\n}: {\n  filters: Filter[];\n  onChangeFilters: (filters: Filter[]) => void;\n}) => {\n  const currentWorkspace = useService(WorkspaceService).workspace;\n  const navigateHelper = useNavigateHelper();\n  const collectionService = useService(CollectionService);\n  const saveToCollection = useCallback(\n    (collection: Collection) => {\n      collectionService.addCollection({\n        ...collection,\n        filterList: filters,\n      });\n      navigateHelper.jumpToCollection(currentWorkspace.id, collection.id);\n    },\n    [collectionService, filters, navigateHelper, currentWorkspace.id]\n  );\n\n  if (!filters.length) {\n    return null;\n  }\n\n  return (\n    <div className={filterContainerStyle}>\n      <div style={{ flex: 1 }}>\n        <FilterList\n          propertiesMeta={currentWorkspace.docCollection.meta.properties}\n          value={filters}\n          onChange={onChangeFilters}\n        />\n      </div>\n      <div>\n        {filters.length > 0 ? (\n          <SaveAsCollectionButton onConfirm={saveToCollection} />\n        ) : null}\n      </div>\n    </div>\n  );\n};\n","import \"../core/src/components/filter-container.css.ts.vanilla.css!=!../../../../../node_modules/@vanilla-extract/webpack-plugin/virtualFileLoader/dist/vanilla-extract-webpack-plugin-virtualFileLoader.cjs.js?{\\\"fileName\\\":\\\"../core/src/components/filter-container.css.ts.vanilla.css\\\",\\\"source\\\":\\\"Ll8xY3EycDljMCB7CiAgcGFkZGluZzogMCAxNnB4OwogIGRpc3BsYXk6IGZsZXg7CiAgcG9zaXRpb246IHJlbGF0aXZlOwp9\\\"}!../../../../../node_modules/@vanilla-extract/webpack-plugin/extracted.js\"\nexport var filterContainerStyle = '_1cq2p9c0';","import { usePageHelper } from '@affine/core/components/blocksuite/block-suite-page-list/utils';\nimport {\n  AllPageListOperationsMenu,\n  PageDisplayMenu,\n  PageListNewPageButton,\n} from '@affine/core/components/page-list';\nimport { Header } from '@affine/core/components/pure/header';\nimport { WorkspaceModeFilterTab } from '@affine/core/components/pure/workspace-mode-filter-tab';\nimport { useAsyncCallback } from '@affine/core/hooks/affine-async-hooks';\nimport { track } from '@affine/core/mixpanel';\nimport { isNewTabTrigger } from '@affine/core/utils';\nimport type { Filter } from '@affine/env/filter';\nimport { PlusIcon } from '@blocksuite/icons/rc';\nimport { useService, WorkspaceService } from '@toeverything/infra';\nimport clsx from 'clsx';\n\nimport * as styles from './all-page.css';\n\nexport const AllPageHeader = ({\n  showCreateNew,\n  filters,\n  onChangeFilters,\n}: {\n  showCreateNew: boolean;\n  filters: Filter[];\n  onChangeFilters: (filters: Filter[]) => void;\n}) => {\n  const workspace = useService(WorkspaceService).workspace;\n  const { importFile, createEdgeless, createPage } = usePageHelper(\n    workspace.docCollection\n  );\n\n  const onImportFile = useAsyncCallback(async () => {\n    const options = await importFile();\n    if (options.isWorkspaceFile) {\n      track.allDocs.header.actions.createWorkspace({\n        control: 'import',\n      });\n    } else {\n      track.allDocs.header.actions.createDoc({\n        control: 'import',\n      });\n    }\n  }, [importFile]);\n\n  return (\n    <Header\n      left={\n        <AllPageListOperationsMenu\n          filterList={filters}\n          onChangeFilterList={onChangeFilters}\n          propertiesMeta={workspace.docCollection.meta.properties}\n        />\n      }\n      right={\n        <>\n          <PageListNewPageButton\n            size=\"small\"\n            className={clsx(\n              styles.headerCreateNewButton,\n              !showCreateNew && styles.headerCreateNewButtonHidden\n            )}\n            onCreateEdgeless={e =>\n              createEdgeless(isNewTabTrigger(e) ? 'new-tab' : true)\n            }\n            onCreatePage={e =>\n              createPage(isNewTabTrigger(e) ? 'new-tab' : true)\n            }\n            onImportFile={onImportFile}\n          >\n            <PlusIcon />\n          </PageListNewPageButton>\n          <PageDisplayMenu />\n        </>\n      }\n      center={<WorkspaceModeFilterTab activeFilter={'docs'} />}\n    />\n  );\n};\n","import \"../core/src/pages/workspace/all-page/all-page.css.ts.vanilla.css!=!../../../../../../../node_modules/@vanilla-extract/webpack-plugin/virtualFileLoader/dist/vanilla-extract-webpack-plugin-virtualFileLoader.cjs.js?{\\\"fileName\\\":\\\"../core/src/pages/workspace/all-page/all-page.css.ts.vanilla.css\\\",\\\"source\\\":\\\"Ll8xNHIwbmsyMCB7CiAgZmxleDogMTsKICB3aWR0aDogMTAwJTsKICBwYWRkaW5nLWJvdHRvbTogMzJweDsKfQouXzE0cjBuazIxIHsKICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuMXMgZWFzZS1pbi1vdXQ7Cn0KLl8xNHIwbmsyMiB7CiAgcGFkZGluZzogNHB4IDhweDsKICBmb250LXNpemU6IDE2cHg7CiAgd2lkdGg6IDMycHg7CiAgaGVpZ2h0OiAyOHB4OwogIGJvcmRlci1yYWRpdXM6IDhweDsKfQouXzE0cjBuazIzIHsKICBvcGFjaXR5OiAwOwogIHBvaW50ZXItZXZlbnRzOiBub25lOwp9Ci5fMTRyMG5rMjQgewogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICBmbGV4OiAxOwogIGhlaWdodDogMTAwJTsKICB3aWR0aDogMTAwJTsKfQ==\\\"}!../../../../../../../node_modules/@vanilla-extract/webpack-plugin/extracted.js\"\nexport var body = '_14r0nk24';\nexport var headerCreateNewButton = '_14r0nk21';\nexport var headerCreateNewButtonHidden = '_14r0nk23';\nexport var headerCreateNewCollectionIconButton = '_14r0nk22';\nexport var scrollContainer = '_14r0nk20';","import {\n  PageListHeader,\n  useFilteredPageMetas,\n  VirtualizedPageList,\n} from '@affine/core/components/page-list';\nimport { useBlockSuiteDocMeta } from '@affine/core/hooks/use-block-suite-page-meta';\nimport { performanceRenderLogger } from '@affine/core/shared';\nimport type { Filter } from '@affine/env/filter';\nimport { useI18n } from '@affine/i18n';\nimport {\n  GlobalContextService,\n  useService,\n  WorkspaceService,\n} from '@toeverything/infra';\nimport { useEffect, useState } from 'react';\n\nimport {\n  useIsActiveView,\n  ViewBody,\n  ViewHeader,\n  ViewIcon,\n  ViewTitle,\n} from '../../../modules/workbench';\nimport { EmptyPageList } from '../page-list-empty';\nimport * as styles from './all-page.css';\nimport { FilterContainer } from './all-page-filter';\nimport { AllPageHeader } from './all-page-header';\n\nexport const AllPage = () => {\n  const currentWorkspace = useService(WorkspaceService).workspace;\n  const globalContext = useService(GlobalContextService).globalContext;\n  const pageMetas = useBlockSuiteDocMeta(currentWorkspace.docCollection);\n  const [hideHeaderCreateNew, setHideHeaderCreateNew] = useState(true);\n\n  const [filters, setFilters] = useState<Filter[]>([]);\n  const filteredPageMetas = useFilteredPageMetas(pageMetas, {\n    filters: filters,\n  });\n\n  const isActiveView = useIsActiveView();\n\n  useEffect(() => {\n    if (isActiveView) {\n      globalContext.isAllDocs.set(true);\n\n      return () => {\n        globalContext.isAllDocs.set(false);\n      };\n    }\n    return;\n  }, [globalContext, isActiveView]);\n\n  const t = useI18n();\n\n  return (\n    <>\n      <ViewTitle title={t['All pages']()} />\n      <ViewIcon icon=\"allDocs\" />\n      <ViewHeader>\n        <AllPageHeader\n          showCreateNew={!hideHeaderCreateNew}\n          filters={filters}\n          onChangeFilters={setFilters}\n        />\n      </ViewHeader>\n      <ViewBody>\n        <div className={styles.body}>\n          <FilterContainer filters={filters} onChangeFilters={setFilters} />\n          {filteredPageMetas.length > 0 ? (\n            <VirtualizedPageList\n              setHideHeaderCreateNewPage={setHideHeaderCreateNew}\n              filters={filters}\n            />\n          ) : (\n            <EmptyPageList\n              type=\"all\"\n              heading={<PageListHeader />}\n              docCollection={currentWorkspace.docCollection}\n            />\n          )}\n        </div>\n      </ViewBody>\n    </>\n  );\n};\n\nexport const Component = () => {\n  performanceRenderLogger.debug('AllPage');\n\n  return <AllPage />;\n};\n"],"names":["FilterContainer","filters","onChangeFilters","currentWorkspace","useService","WorkspaceService","workspace","navigateHelper","useNavigateHelper","collectionService","CollectionService","saveToCollection","useCallback","addCollection","collection","filterList","jumpToCollection","id","length","div","className","style","flex","FilterList","propertiesMeta","docCollection","meta","properties","value","onChange","SaveAsCollectionButton","onConfirm","AllPageHeader","showCreateNew","importFile","createEdgeless","createPage","usePageHelper","onImportFile","useAsyncCallback","options","isWorkspaceFile","track","allDocs","header","actions","createWorkspace","control","createDoc","Header","left","AllPageListOperationsMenu","onChangeFilterList","right","PageListNewPageButton","size","clsx","onCreateEdgeless","e","isNewTabTrigger","onCreatePage","PlusIcon","PageDisplayMenu","center","WorkspaceModeFilterTab","activeFilter","AllPage","globalContext","GlobalContextService","pageMetas","useBlockSuiteDocMeta","hideHeaderCreateNew","setHideHeaderCreateNew","useState","setFilters","filteredPageMetas","useFilteredPageMetas","isActiveView","useIsActiveView","useEffect","isAllDocs","set","t","useI18n","ViewTitle","title","ViewIcon","icon","ViewHeader","ViewBody","VirtualizedPageList","setHideHeaderCreateNewPage","EmptyPageList","type","heading","PageListHeader","Component","performanceRenderLogger","debug"],"sourceRoot":""}